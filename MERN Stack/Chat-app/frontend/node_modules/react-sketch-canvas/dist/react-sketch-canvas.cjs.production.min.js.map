{"version":3,"file":"react-sketch-canvas.cjs.production.min.js","sources":["../node_modules/regenerator-runtime/runtime.js","../src/Paths/index.tsx","../src/Canvas/index.tsx","../src/ReactSketchCanvas/index.tsx"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import * as React from 'react';\nimport { CanvasPath, Point } from '../types';\n\nexport type SvgPathProps = {\n  // List of points to create the stroke\n  paths: Point[];\n  // Unique ID\n  id: string;\n  // Width of the stroke\n  strokeWidth: number;\n  // Color of the stroke\n  strokeColor: string;\n  // Bezier command to smoothen the line\n  command?: (point: Point, i: number, a: Point[]) => string;\n};\n\n/**\n * Generate SVG Path tag from the given points\n */\nexport const SvgPath = ({\n  paths,\n  id,\n  strokeWidth,\n  strokeColor,\n  command = bezierCommand,\n}: SvgPathProps): JSX.Element => {\n  if (paths.length === 1) {\n    const { x, y } = paths[0];\n    const radius = strokeWidth / 2;\n\n    return (\n      <circle\n        key={id}\n        id={id}\n        cx={x}\n        cy={y}\n        r={radius}\n        stroke={strokeColor}\n        fill={strokeColor}\n      />\n    );\n  }\n\n  const d = paths.reduce(\n    (acc, point, i, a) =>\n      i === 0 ? `M ${point.x},${point.y}` : `${acc} ${command(point, i, a)}`,\n    ''\n  );\n\n  return (\n    <path\n      key={id}\n      id={id}\n      d={d}\n      fill=\"none\"\n      strokeLinecap=\"round\"\n      stroke={strokeColor}\n      strokeWidth={strokeWidth}\n    />\n  );\n};\n\nexport const line = (pointA: Point, pointB: Point) => {\n  const lengthX = pointB.x - pointA.x;\n  const lengthY = pointB.y - pointA.y;\n\n  return {\n    length: Math.sqrt(lengthX ** 2 + lengthY ** 2),\n    angle: Math.atan2(lengthY, lengthX),\n  };\n};\n\ntype ControlPoints = {\n  current: Point;\n  previous?: Point;\n  next?: Point;\n  reverse?: boolean;\n};\n\nconst controlPoint = (controlPoints: ControlPoints): [number, number] => {\n  const { current, next, previous, reverse } = controlPoints;\n\n  const p = previous || current;\n  const n = next || current;\n\n  const smoothing = 0.2;\n\n  const o = line(p, n);\n\n  const angle = o.angle + (reverse ? Math.PI : 0);\n  const length = o.length * smoothing;\n\n  const x = current.x + Math.cos(angle) * length;\n  const y = current.y + Math.sin(angle) * length;\n\n  return [x, y];\n};\n\nexport const bezierCommand = (point: Point, i: number, a: Point[]): string => {\n  let cpsX = null;\n  let cpsY = null;\n\n  switch (i) {\n    case 0:\n      [cpsX, cpsY] = controlPoint({\n        current: point,\n      });\n      break;\n    case 1:\n      [cpsX, cpsY] = controlPoint({\n        current: a[i - 1],\n        next: point,\n      });\n      break;\n    default:\n      [cpsX, cpsY] = controlPoint({\n        current: a[i - 1],\n        previous: a[i - 2],\n        next: point,\n      });\n      break;\n  }\n\n  const [cpeX, cpeY] = controlPoint({\n    current: point,\n    previous: a[i - 1],\n    next: a[i + 1],\n    reverse: true,\n  });\n\n  return `C ${cpsX},${cpsY} ${cpeX},${cpeY} ${point.x}, ${point.y}`;\n};\n\ntype PathProps = {\n  id: string;\n  paths: CanvasPath[];\n};\n\nconst Paths = ({ id, paths }: PathProps): JSX.Element => (\n  <React.Fragment>\n    {paths.map((path: CanvasPath, index: number) => (\n      <SvgPath\n        key={`${id}__${index}`}\n        paths={path.paths}\n        id={`${id}__${index}`}\n        strokeWidth={path.strokeWidth}\n        strokeColor={path.strokeColor}\n        command={bezierCommand}\n      />\n    ))}\n  </React.Fragment>\n);\n\nexport default Paths;\n","import * as React from 'react';\nimport Paths, { SvgPath } from '../Paths';\nimport { CanvasPath, ExportImageType, Point } from '../types';\n\nconst loadImage = (url: string): Promise<HTMLImageElement> =>\n  new Promise((resolve, reject) => {\n    const img = new Image();\n    img.addEventListener('load', () => {\n      if (img.width > 0) {\n        resolve(img);\n      }\n      reject('Image not found');\n    });\n    img.addEventListener('error', (err) => reject(err));\n    img.src = url;\n    img.setAttribute('crossorigin', 'anonymous');\n  });\n\nfunction getCanvasWithViewBox(canvas: HTMLDivElement) {\n  const svgCanvas = canvas.firstChild?.cloneNode(true) as SVGElement;\n\n  const width = canvas.offsetWidth;\n  const height = canvas.offsetHeight;\n\n  svgCanvas.setAttribute('viewBox', `0 0 ${width} ${height}`);\n\n  svgCanvas.setAttribute('width', width.toString());\n  svgCanvas.setAttribute('height', height.toString());\n  return { svgCanvas, width, height };\n}\n\nexport interface CanvasProps {\n  paths: CanvasPath[];\n  isDrawing: boolean;\n  onPointerDown: (point: Point) => void;\n  onPointerMove: (point: Point) => void;\n  onPointerUp: () => void;\n  className?: string;\n  id?: string;\n  width: string;\n  height: string;\n  canvasColor: string;\n  backgroundImage: string;\n  exportWithBackgroundImage: boolean;\n  preserveBackgroundImageAspectRatio: string;\n  allowOnlyPointerType: string;\n  style: React.CSSProperties;\n  svgStyle: React.CSSProperties;\n}\n\nexport interface CanvasRef {\n  exportImage: (imageType: ExportImageType) => Promise<string>;\n  exportSvg: () => Promise<string>;\n}\n\nexport const Canvas = React.forwardRef<CanvasRef, CanvasProps>((props, ref) => {\n  const {\n    paths,\n    isDrawing,\n    onPointerDown,\n    onPointerMove,\n    onPointerUp,\n    id = 'react-sketch-canvas',\n    width = '100%',\n    height = '100%',\n    className = 'react-sketch-canvas',\n    canvasColor = 'red',\n    backgroundImage = '',\n    exportWithBackgroundImage = false,\n    preserveBackgroundImageAspectRatio = 'none',\n    allowOnlyPointerType = 'all',\n    style = {\n      border: '0.0625rem solid #9c9c9c',\n      borderRadius: '0.25rem',\n    },\n    svgStyle = {},\n  } = props;\n\n  const canvasRef = React.useRef<HTMLDivElement>(null);\n\n  // Converts mouse coordinates to relative coordinate based on the absolute position of svg\n  const getCoordinates = (\n    pointerEvent: React.PointerEvent<HTMLDivElement>\n  ): Point => {\n    const boundingArea = canvasRef.current?.getBoundingClientRect();\n\n    const scrollLeft = window.scrollX ?? 0;\n    const scrollTop = window.scrollY ?? 0;\n\n    if (!boundingArea) {\n      return { x: 0, y: 0 };\n    }\n\n    const point: Point = {\n      x: pointerEvent.pageX - boundingArea.left - scrollLeft,\n      y: pointerEvent.pageY - boundingArea.top - scrollTop,\n    };\n\n    return point;\n  };\n\n  /* Mouse Handlers - Mouse down, move and up */\n\n  const handlePointerDown = (\n    event: React.PointerEvent<HTMLDivElement>\n  ): void => {\n    // Allow only chosen pointer type\n\n    if (\n      allowOnlyPointerType !== 'all' &&\n      event.pointerType !== allowOnlyPointerType\n    ) {\n      return;\n    }\n\n    if (event.pointerType === 'mouse' && event.button !== 0) return;\n\n    const point = getCoordinates(event);\n\n    onPointerDown(point);\n  };\n\n  const handlePointerMove = (\n    event: React.PointerEvent<HTMLDivElement>\n  ): void => {\n    if (!isDrawing) return;\n\n    // Allow only chosen pointer type\n    if (\n      allowOnlyPointerType !== 'all' &&\n      event.pointerType !== allowOnlyPointerType\n    ) {\n      return;\n    }\n\n    const point = getCoordinates(event);\n\n    onPointerMove(point);\n  };\n\n  const handlePointerUp = (\n    event: React.PointerEvent<HTMLDivElement> | PointerEvent\n  ): void => {\n    if (event.pointerType === 'mouse' && event.button !== 0) return;\n\n    // Allow only chosen pointer type\n    if (\n      allowOnlyPointerType !== 'all' &&\n      event.pointerType !== allowOnlyPointerType\n    ) {\n      return;\n    }\n\n    onPointerUp();\n  };\n\n  /* Mouse Handlers ends */\n\n  React.useImperativeHandle(ref, () => ({\n    exportImage: (imageType: ExportImageType): Promise<string> => {\n      return new Promise<string>(async (resolve, reject) => {\n        try {\n          const canvas = canvasRef.current;\n\n          if (!canvas) {\n            throw Error('Canvas not rendered yet');\n          }\n\n          const { svgCanvas, width, height } = getCanvasWithViewBox(canvas);\n          const canvasSketch = `data:image/svg+xml;base64,${btoa(\n            svgCanvas.outerHTML\n          )}`;\n\n          const loadImagePromises = [await loadImage(canvasSketch)];\n\n          if (exportWithBackgroundImage) {\n            try {\n              const img = await loadImage(backgroundImage);\n              loadImagePromises.push(img);\n            } catch (error) {\n              console.warn(\n                'exportWithBackgroundImage props is set without a valid background image URL. This option is ignored'\n              );\n            }\n          }\n\n          Promise.all(loadImagePromises)\n            .then((images) => {\n              const renderCanvas = document.createElement('canvas');\n              renderCanvas.setAttribute('width', width.toString());\n              renderCanvas.setAttribute('height', height.toString());\n              const context = renderCanvas.getContext('2d');\n\n              if (!context) {\n                throw Error('Canvas not rendered yet');\n              }\n\n              images.reverse().forEach((image) => {\n                context.drawImage(image, 0, 0);\n              });\n\n              resolve(renderCanvas.toDataURL(`image/${imageType}`));\n            })\n            .catch((e) => {\n              throw e;\n            });\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n    exportSvg: (): Promise<string> => {\n      return new Promise<string>((resolve, reject) => {\n        try {\n          const canvas = canvasRef.current ?? null;\n\n          if (canvas !== null) {\n            const { svgCanvas } = getCanvasWithViewBox(canvas);\n\n            if (exportWithBackgroundImage) {\n              resolve(svgCanvas.outerHTML);\n              return;\n            }\n\n            svgCanvas.querySelector(`#${id}__background`)?.remove();\n            svgCanvas\n              .querySelector(`#${id}__canvas-background`)\n              ?.setAttribute('fill', canvasColor);\n\n            resolve(svgCanvas.outerHTML);\n          }\n\n          reject(new Error('Canvas not loaded'));\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n  }));\n\n  /* Add event listener to Mouse up and Touch up to\nrelease drawing even when point goes out of canvas */\n  React.useEffect(() => {\n    document.addEventListener('pointerup', handlePointerUp);\n    return () => {\n      document.removeEventListener('pointerup', handlePointerUp);\n    };\n  }, [handlePointerUp]);\n\n  const eraserPaths = paths.filter((path) => !path.drawMode);\n\n  let currentGroup = 0;\n  const pathGroups = paths.reduce<CanvasPath[][]>(\n    (arrayGroup, path) => {\n      if (!path.drawMode) {\n        currentGroup += 1;\n        return arrayGroup;\n      }\n\n      if (arrayGroup[currentGroup] === undefined) {\n        arrayGroup[currentGroup] = [];\n      }\n\n      arrayGroup[currentGroup].push(path);\n      return arrayGroup;\n    },\n    [[]]\n  );\n\n  return (\n    <div\n      role=\"presentation\"\n      ref={canvasRef}\n      className={className}\n      style={{\n        touchAction: 'none',\n        width,\n        height,\n        ...style,\n      }}\n      touch-action=\"none\"\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n    >\n      <svg\n        version=\"1.1\"\n        baseProfile=\"full\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n        style={{\n          width: '100%',\n          height: '100%',\n          ...svgStyle,\n        }}\n        id={id}\n      >\n        <g id={`${id}__eraser-stroke-group`} display=\"none\">\n          <rect\n            id={`${id}__mask-background`}\n            x=\"0\"\n            y=\"0\"\n            width=\"100%\"\n            height=\"100%\"\n            fill=\"white\"\n          />\n          {eraserPaths.map((eraserPath, i) => (\n            <SvgPath\n              key={`${id}__eraser-${i}`}\n              id={`${id}__eraser-${i}`}\n              paths={eraserPath.paths}\n              strokeColor=\"#000000\"\n              strokeWidth={eraserPath.strokeWidth}\n            />\n          ))}\n        </g>\n        <defs>\n          {backgroundImage && (\n            <pattern\n              id={`${id}__background`}\n              x=\"0\"\n              y=\"0\"\n              width=\"100%\"\n              height=\"100%\"\n              patternUnits=\"userSpaceOnUse\"\n            >\n              <image\n                x=\"0\"\n                y=\"0\"\n                width=\"100%\"\n                height=\"100%\"\n                xlinkHref={backgroundImage}\n                preserveAspectRatio={preserveBackgroundImageAspectRatio}\n              ></image>\n            </pattern>\n          )}\n\n          {eraserPaths.map((_, i) => (\n            <mask\n              id={`${id}__eraser-mask-${i}`}\n              key={`${id}__eraser-mask-${i}`}\n              maskUnits=\"userSpaceOnUse\"\n            >\n              <use href={`#${id}__mask-background`} />\n              {Array.from(\n                { length: eraserPaths.length - i },\n                (_, j) => j + i\n              ).map((k) => (\n                <use\n                  key={k.toString()}\n                  href={`#${id}__eraser-${k.toString()}`}\n                />\n              ))}\n            </mask>\n          ))}\n        </defs>\n        <g id={`${id}__canvas-background-group`}>\n          <rect\n            id={`${id}__canvas-background`}\n            x=\"0\"\n            y=\"0\"\n            width=\"100%\"\n            height=\"100%\"\n            fill={backgroundImage ? `url(#${id}__background)` : canvasColor}\n          />\n        </g>\n        {pathGroups.map((pathGroup, i) => (\n          <g\n            id={`${id}__stroke-group-${i}`}\n            key={`${id}__stroke-group-${i}`}\n            mask={`url(#${id}__eraser-mask-${i})`}\n          >\n            <Paths id={id} paths={pathGroup} />\n          </g>\n        ))}\n      </svg>\n    </div>\n  );\n});\n","import * as React from 'react';\nimport { Canvas, CanvasRef } from '../Canvas';\nimport { CanvasPath, ExportImageType, Point } from '../types';\n\nexport type ReactSketchCanvasStates = {};\n\n/* Props validation */\nexport interface ReactSketchCanvasProps {\n  id?: string;\n  width?: string;\n  height?: string;\n  className?: string;\n  strokeColor?: string;\n  canvasColor?: string;\n  backgroundImage?: string;\n  exportWithBackgroundImage?: boolean;\n  preserveBackgroundImageAspectRatio?: string;\n  strokeWidth?: number;\n  eraserWidth?: number;\n  allowOnlyPointerType?: string;\n  onChange?: (updatedPaths: CanvasPath[]) => void;\n  onStroke?: (path: CanvasPath, isEraser: boolean) => void;\n  style?: React.CSSProperties;\n  svgStyle?: React.CSSProperties;\n  withTimestamp?: boolean;\n}\n\nexport interface ReactSketchCanvasRef {\n  eraseMode: (erase: boolean) => void;\n  clearCanvas: () => void;\n  undo: () => void;\n  redo: () => void;\n  exportImage: (imageType: ExportImageType) => Promise<string>;\n  exportSvg: () => Promise<string>;\n  exportPaths: () => Promise<CanvasPath[]>;\n  loadPaths: (paths: CanvasPath[]) => void;\n  getSketchingTime: () => Promise<number>;\n  resetCanvas: () => void;\n}\n\nexport const ReactSketchCanvas = React.forwardRef<\n  ReactSketchCanvasRef,\n  ReactSketchCanvasProps\n>((props, ref) => {\n  const {\n    id = 'react-sketch-canvas',\n    width = '100%',\n    height = '100%',\n    className = '',\n    canvasColor = 'white',\n    strokeColor = 'red',\n    backgroundImage = '',\n    exportWithBackgroundImage = false,\n    preserveBackgroundImageAspectRatio = 'none',\n    strokeWidth = 4,\n    eraserWidth = 8,\n    allowOnlyPointerType = 'all',\n    style = {\n      border: '0.0625rem solid #9c9c9c',\n      borderRadius: '0.25rem',\n    },\n    svgStyle = {},\n    onChange = (_paths: CanvasPath[]): void => {},\n    onStroke = (_path: CanvasPath, _isEraser: boolean): void => {},\n    withTimestamp = false,\n  } = props;\n\n  const svgCanvas = React.createRef<CanvasRef>();\n  const [drawMode, setDrawMode] = React.useState<boolean>(true);\n  const [isDrawing, setIsDrawing] = React.useState<boolean>(false);\n  const [resetStack, setResetStack] = React.useState<CanvasPath[]>([]);\n  const [undoStack, setUndoStack] = React.useState<CanvasPath[]>([]);\n  const [currentPaths, setCurrentPaths] = React.useState<CanvasPath[]>([]);\n\n  const liftStrokeUp = React.useCallback((): void => {\n    const lastStroke = currentPaths.slice(-1)?.[0] ?? null;\n\n    if (lastStroke === null) {\n      console.warn('No stroke found!');\n      return;\n    }\n\n    onStroke(lastStroke, !lastStroke.drawMode);\n  }, [isDrawing]);\n\n  React.useEffect(() => {\n    liftStrokeUp();\n  }, [isDrawing]);\n\n  React.useEffect(() => {\n    onChange(currentPaths);\n  }, [currentPaths]);\n\n  React.useImperativeHandle(ref, () => ({\n    eraseMode: (erase: boolean): void => {\n      setDrawMode(!erase);\n    },\n    clearCanvas: (): void => {\n      setResetStack([...currentPaths]);\n      setCurrentPaths([]);\n    },\n    undo: (): void => {\n      // If there was a last reset then\n      if (resetStack.length !== 0) {\n        setCurrentPaths([...resetStack]);\n        setResetStack([]);\n\n        return;\n      }\n\n      setUndoStack((undoStack) => [...undoStack, ...currentPaths.slice(-1)]);\n      setCurrentPaths((currentPaths) => currentPaths.slice(0, -1));\n    },\n    redo: (): void => {\n      // Nothing to Redo\n      if (undoStack.length === 0) return;\n\n      setCurrentPaths((currentPaths) => [\n        ...currentPaths,\n        ...undoStack.slice(-1),\n      ]);\n      setUndoStack((undoStack) => undoStack.slice(0, -1));\n    },\n    exportImage: (imageType: ExportImageType): Promise<string> => {\n      const exportImage = svgCanvas.current?.exportImage;\n\n      if (!exportImage) {\n        throw Error('Export function called before canvas loaded');\n      } else {\n        return exportImage(imageType);\n      }\n    },\n    exportSvg: (): Promise<string> => {\n      return new Promise<string>((resolve, reject) => {\n        const exportSvg = svgCanvas.current?.exportSvg;\n\n        if (!exportSvg) {\n          reject(Error('Export function called before canvas loaded'));\n        } else {\n          exportSvg()\n            .then((data) => {\n              resolve(data);\n            })\n            .catch((e) => {\n              reject(e);\n            });\n        }\n      });\n    },\n    exportPaths: (): Promise<CanvasPath[]> => {\n      return new Promise<CanvasPath[]>((resolve, reject) => {\n        try {\n          resolve(currentPaths);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n    loadPaths: (paths: CanvasPath[]): void => {\n      setCurrentPaths((currentPaths) => [...currentPaths, ...paths]);\n    },\n    getSketchingTime: (): Promise<number> => {\n      return new Promise<number>((resolve, reject) => {\n        if (!withTimestamp) {\n          reject(new Error(\"Set 'withTimestamp' prop to get sketching time\"));\n        }\n\n        try {\n          const sketchingTime = currentPaths.reduce(\n            (totalSketchingTime, path) => {\n              const startTimestamp = path.startTimestamp ?? 0;\n              const endTimestamp = path.endTimestamp ?? 0;\n\n              return totalSketchingTime + (endTimestamp - startTimestamp);\n            },\n            0\n          );\n\n          resolve(sketchingTime);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n    resetCanvas: (): void => {\n      setResetStack([]);\n      setUndoStack([]);\n      setCurrentPaths([]);\n    },\n  }));\n\n  const handlePointerDown = (point: Point): void => {\n    setIsDrawing(true);\n    setUndoStack([]);\n\n    let stroke: CanvasPath = {\n      drawMode: drawMode,\n      strokeColor: drawMode ? strokeColor : '#000000', // Eraser using mask\n      strokeWidth: drawMode ? strokeWidth : eraserWidth,\n      paths: [point],\n    };\n\n    if (withTimestamp) {\n      stroke = {\n        ...stroke,\n        startTimestamp: Date.now(),\n        endTimestamp: 0,\n      };\n    }\n\n    setCurrentPaths((currentPaths) => [...currentPaths, stroke]);\n  };\n\n  const handlePointerMove = (point: Point): void => {\n    if (!isDrawing) return;\n\n    const currentStroke = currentPaths.slice(-1)[0];\n    const updatedStroke = {\n      ...currentStroke,\n      paths: [...currentStroke.paths, point],\n    };\n    setCurrentPaths((currentPaths) => [\n      ...currentPaths.slice(0, -1),\n      updatedStroke,\n    ]);\n  };\n\n  const handlePointerUp = (): void => {\n    if (!isDrawing) {\n      return;\n    }\n\n    setIsDrawing(false);\n\n    if (!withTimestamp) {\n      return;\n    }\n\n    let currentStroke = currentPaths.slice(-1)?.[0] ?? null;\n\n    if (currentStroke === null) {\n      return;\n    }\n\n    const updatedStroke = {\n      ...currentStroke,\n      endTimestamp: Date.now(),\n    };\n\n    setCurrentPaths((currentPaths) => [\n      ...currentPaths.slice(0, -1),\n      updatedStroke,\n    ]);\n  };\n\n  return (\n    <Canvas\n      ref={svgCanvas}\n      id={id}\n      width={width}\n      height={height}\n      className={className}\n      canvasColor={canvasColor}\n      backgroundImage={backgroundImage}\n      exportWithBackgroundImage={exportWithBackgroundImage}\n      preserveBackgroundImageAspectRatio={preserveBackgroundImageAspectRatio}\n      allowOnlyPointerType={allowOnlyPointerType}\n      style={style}\n      svgStyle={svgStyle}\n      paths={currentPaths}\n      isDrawing={isDrawing}\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n    />\n  );\n});\n"],"names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","generator","create","Generator","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","globalThis","Function","SvgPath","paths","id","strokeWidth","strokeColor","command","bezierCommand","React","cx","x","cy","y","r","stroke","fill","d","reduce","acc","point","a","strokeLinecap","controlPoint","controlPoints","pointA","pointB","lengthX","lengthY","current","o","previous","Math","sqrt","angle","atan2","PI","cos","sin","cpsX","cpsY","Paths","Fragment","map","path","index","loadImage","url","img","Image","addEventListener","width","src","setAttribute","getCanvasWithViewBox","canvas","svgCanvas","firstChild","_canvas$firstChild","cloneNode","offsetWidth","height","offsetHeight","toString","Canvas","forwardRef","props","ref","isDrawing","onPointerDown","onPointerMove","onPointerUp","className","canvasColor","backgroundImage","exportWithBackgroundImage","preserveBackgroundImageAspectRatio","allowOnlyPointerType","style","border","borderRadius","svgStyle","canvasRef","useRef","getCoordinates","pointerEvent","boundingArea","_canvasRef$current","getBoundingClientRect","scrollLeft","window","scrollX","scrollTop","scrollY","pageX","left","pageY","top","handlePointerUp","event","pointerType","button","useImperativeHandle","exportImage","imageType","canvasSketch","btoa","outerHTML","loadImagePromises","console","warn","all","images","renderCanvas","document","createElement","getContext","image","drawImage","toDataURL","e","exportSvg","querySelector","remove","useEffect","removeEventListener","eraserPaths","filter","drawMode","currentGroup","pathGroups","arrayGroup","role","touchAction","version","baseProfile","xmlns","xmlnsXlink","display","eraserPath","patternUnits","xlinkHref","preserveAspectRatio","_","maskUnits","href","Array","from","j","k","pathGroup","mask","ReactSketchCanvas","eraserWidth","onChange","_paths","onStroke","_path","_isEraser","withTimestamp","createRef","useState","setDrawMode","setIsDrawing","resetStack","setResetStack","undoStack","setUndoStack","currentPaths","setCurrentPaths","liftStrokeUp","useCallback","lastStroke","_currentPaths$slice","eraseMode","erase","clearCanvas","undo","redo","_svgCanvas$current","_svgCanvas$current2","data","exportPaths","loadPaths","getSketchingTime","totalSketchingTime","startTimestamp","endTimestamp","resetCanvas","Date","now","currentStroke","updatedStroke","_currentPaths$slice2"],"mappings":"utBAOA,IAAIA,EAAW,SAAUC,GAGvB,IAEIC,EAFAC,EAAKC,OAAOC,UACZC,EAASH,EAAGI,eAEZC,EAA4B,mBAAXC,OAAwBA,OAAS,GAClDC,EAAiBF,EAAQG,UAAY,aACrCC,EAAsBJ,EAAQK,eAAiB,kBAC/CC,EAAoBN,EAAQO,aAAe,gBAE/C,SAASC,EAAOC,EAAKC,EAAKC,GAOxB,OANAf,OAAOgB,eAAeH,EAAKC,EAAK,CAC9BC,MAAOA,EACPE,YAAY,EACZC,cAAc,EACdC,UAAU,IAELN,EAAIC,GAEb,IAEEF,EAAO,GAAI,IACX,MAAOQ,GACPR,EAAS,SAASC,EAAKC,EAAKC,GAC1B,OAAOF,EAAIC,GAAOC,GAItB,SAASM,EAAKC,EAASC,EAASC,EAAMC,GAEpC,IACIC,EAAY1B,OAAO2B,QADFJ,GAAWA,EAAQtB,qBAAqB2B,EAAYL,EAAUK,GACtC3B,WACzC4B,EAAU,IAAIC,EAAQL,GAAe,IAMzC,OAFAC,EAAUK,QAuMZ,SAA0BT,EAASE,EAAMK,GACvC,IAAIG,EAAQC,EAEZ,OAAO,SAAgBC,EAAQC,GAC7B,GAAIH,IAAUI,EACZ,MAAM,IAAIC,MAAM,gCAGlB,GAAIL,IAAUM,EAAmB,CAC/B,GAAe,UAAXJ,EACF,MAAMC,EAKR,OAAOI,IAMT,IAHAV,EAAQK,OAASA,EACjBL,EAAQM,IAAMA,IAED,CACX,IAAIK,EAAWX,EAAQW,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUX,GACnD,GAAIY,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBZ,EAAQK,OAGVL,EAAQe,KAAOf,EAAQgB,MAAQhB,EAAQM,SAElC,GAAuB,UAAnBN,EAAQK,OAAoB,CACrC,GAAIF,IAAUC,EAEZ,MADAD,EAAQM,EACFT,EAAQM,IAGhBN,EAAQiB,kBAAkBjB,EAAQM,SAEN,WAAnBN,EAAQK,QACjBL,EAAQkB,OAAO,SAAUlB,EAAQM,KAGnCH,EAAQI,EAER,IAAIY,EAASC,EAAS3B,EAASE,EAAMK,GACrC,GAAoB,WAAhBmB,EAAOE,KAAmB,CAO5B,GAJAlB,EAAQH,EAAQsB,KACZb,EACAc,EAEAJ,EAAOb,MAAQQ,EACjB,SAGF,MAAO,CACL5B,MAAOiC,EAAOb,IACdgB,KAAMtB,EAAQsB,MAGS,UAAhBH,EAAOE,OAChBlB,EAAQM,EAGRT,EAAQK,OAAS,QACjBL,EAAQM,IAAMa,EAAOb,OA/QPkB,CAAiB/B,EAASE,EAAMK,GAE7CH,EAcT,SAASuB,EAASK,EAAIzC,EAAKsB,GACzB,IACE,MAAO,CAAEe,KAAM,SAAUf,IAAKmB,EAAGC,KAAK1C,EAAKsB,IAC3C,MAAOf,GACP,MAAO,CAAE8B,KAAM,QAASf,IAAKf,IAhBjCvB,EAAQwB,KAAOA,EAoBf,IAAIY,EAAyB,iBACzBmB,EAAyB,iBACzBhB,EAAoB,YACpBE,EAAoB,YAIpBK,EAAmB,GAMvB,SAASf,KACT,SAAS4B,KACT,SAASC,KAIT,IAAIC,EAAoB,GACxB9C,EAAO8C,EAAmBpD,GAAgB,WACxC,OAAOqD,QAGT,IAAIC,EAAW5D,OAAO6D,eAClBC,EAA0BF,GAAYA,EAASA,EAASG,EAAO,MAC/DD,GACAA,IAA4B/D,GAC5BG,EAAOqD,KAAKO,EAAyBxD,KAGvCoD,EAAoBI,GAGtB,IAAIE,EAAKP,EAA2BxD,UAClC2B,EAAU3B,UAAYD,OAAO2B,OAAO+B,GAYtC,SAASO,EAAsBhE,GAC7B,CAAC,OAAQ,QAAS,UAAUiE,SAAQ,SAAShC,GAC3CtB,EAAOX,EAAWiC,GAAQ,SAASC,GACjC,OAAOwB,KAAK5B,QAAQG,EAAQC,SAkClC,SAASgC,EAAczC,EAAW0C,GAChC,SAASC,EAAOnC,EAAQC,EAAKmC,EAASC,GACpC,IAAIvB,EAASC,EAASvB,EAAUQ,GAASR,EAAWS,GACpD,GAAoB,UAAhBa,EAAOE,KAEJ,CACL,IAAIsB,EAASxB,EAAOb,IAChBpB,EAAQyD,EAAOzD,MACnB,OAAIA,GACiB,iBAAVA,GACPb,EAAOqD,KAAKxC,EAAO,WACdqD,EAAYE,QAAQvD,EAAM0D,SAASC,MAAK,SAAS3D,GACtDsD,EAAO,OAAQtD,EAAOuD,EAASC,MAC9B,SAASnD,GACViD,EAAO,QAASjD,EAAKkD,EAASC,MAI3BH,EAAYE,QAAQvD,GAAO2D,MAAK,SAASC,GAI9CH,EAAOzD,MAAQ4D,EACfL,EAAQE,MACP,SAASI,GAGV,OAAOP,EAAO,QAASO,EAAON,EAASC,MAvBzCA,EAAOvB,EAAOb,KA4BlB,IAAI0C,EAgCJlB,KAAK5B,QA9BL,SAAiBG,EAAQC,GACvB,SAAS2C,IACP,OAAO,IAAIV,GAAY,SAASE,EAASC,GACvCF,EAAOnC,EAAQC,EAAKmC,EAASC,MAIjC,OAAOM,EAaLA,EAAkBA,EAAgBH,KAChCI,EAGAA,GACEA,KAkHV,SAASpC,EAAoBF,EAAUX,GACrC,IAAIK,EAASM,EAASjC,SAASsB,EAAQK,QACvC,GAAIA,IAAWpC,EAAW,CAKxB,GAFA+B,EAAQW,SAAW,KAEI,UAAnBX,EAAQK,OAAoB,CAE9B,GAAIM,EAASjC,SAAiB,SAG5BsB,EAAQK,OAAS,SACjBL,EAAQM,IAAMrC,EACd4C,EAAoBF,EAAUX,GAEP,UAAnBA,EAAQK,QAGV,OAAOS,EAIXd,EAAQK,OAAS,QACjBL,EAAQM,IAAM,IAAI4C,UAChB,kDAGJ,OAAOpC,EAGT,IAAIK,EAASC,EAASf,EAAQM,EAASjC,SAAUsB,EAAQM,KAEzD,GAAoB,UAAhBa,EAAOE,KAIT,OAHArB,EAAQK,OAAS,QACjBL,EAAQM,IAAMa,EAAOb,IACrBN,EAAQW,SAAW,KACZG,EAGT,IAAIqC,EAAOhC,EAAOb,IAElB,OAAM6C,EAOFA,EAAK7B,MAGPtB,EAAQW,EAASyC,YAAcD,EAAKjE,MAGpCc,EAAQqD,KAAO1C,EAAS2C,QAQD,WAAnBtD,EAAQK,SACVL,EAAQK,OAAS,OACjBL,EAAQM,IAAMrC,GAUlB+B,EAAQW,SAAW,KACZG,GANEqC,GA3BPnD,EAAQK,OAAS,QACjBL,EAAQM,IAAM,IAAI4C,UAAU,oCAC5BlD,EAAQW,SAAW,KACZG,GAoDX,SAASyC,EAAaC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxB1B,KAAKgC,WAAWC,KAAKN,GAGvB,SAASO,EAAcP,GACrB,IAAItC,EAASsC,EAAMQ,YAAc,GACjC9C,EAAOE,KAAO,gBACPF,EAAOb,IACdmD,EAAMQ,WAAa9C,EAGrB,SAASlB,EAAQL,GAIfkC,KAAKgC,WAAa,CAAC,CAAEJ,OAAQ,SAC7B9D,EAAYyC,QAAQkB,EAAczB,MAClCA,KAAKoC,OAAM,GA8Bb,SAAShC,EAAOiC,GACd,GAAIA,EAAU,CACZ,IAAIC,EAAiBD,EAAS1F,GAC9B,GAAI2F,EACF,OAAOA,EAAe1C,KAAKyC,GAG7B,GAA6B,mBAAlBA,EAASd,KAClB,OAAOc,EAGT,IAAKE,MAAMF,EAASG,QAAS,CAC3B,IAAIC,GAAK,EAAGlB,EAAO,SAASA,IAC1B,OAASkB,EAAIJ,EAASG,QACpB,GAAIjG,EAAOqD,KAAKyC,EAAUI,GAGxB,OAFAlB,EAAKnE,MAAQiF,EAASI,GACtBlB,EAAK/B,MAAO,EACL+B,EAOX,OAHAA,EAAKnE,MAAQjB,EACboF,EAAK/B,MAAO,EAEL+B,GAGT,OAAOA,EAAKA,KAAOA,GAKvB,MAAO,CAAEA,KAAM3C,GAIjB,SAASA,IACP,MAAO,CAAExB,MAAOjB,EAAWqD,MAAM,GA+MnC,OA7mBAK,EAAkBvD,UAAYwD,EAC9B7C,EAAOoD,EAAI,cAAeP,GAC1B7C,EAAO6C,EAA4B,cAAeD,GAClDA,EAAkB6C,YAAczF,EAC9B6C,EACA/C,EACA,qBAaFb,EAAQyG,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAOE,YAClD,QAAOD,IACHA,IAAShD,GAG2B,uBAAnCgD,EAAKH,aAAeG,EAAKE,QAIhC7G,EAAQ8G,KAAO,SAASJ,GAQtB,OAPIvG,OAAO4G,eACT5G,OAAO4G,eAAeL,EAAQ9C,IAE9B8C,EAAOM,UAAYpD,EACnB7C,EAAO2F,EAAQ7F,EAAmB,sBAEpC6F,EAAOtG,UAAYD,OAAO2B,OAAOqC,GAC1BuC,GAOT1G,EAAQiH,MAAQ,SAAS3E,GACvB,MAAO,CAAEsC,QAAStC,IAsEpB8B,EAAsBE,EAAclE,WACpCW,EAAOuD,EAAclE,UAAWO,GAAqB,WACnD,OAAOmD,QAET9D,EAAQsE,cAAgBA,EAKxBtE,EAAQkH,MAAQ,SAASzF,EAASC,EAASC,EAAMC,EAAa2C,QACxC,IAAhBA,IAAwBA,EAAc4C,SAE1C,IAAIC,EAAO,IAAI9C,EACb9C,EAAKC,EAASC,EAASC,EAAMC,GAC7B2C,GAGF,OAAOvE,EAAQyG,oBAAoB/E,GAC/B0F,EACAA,EAAK/B,OAAOR,MAAK,SAASF,GACxB,OAAOA,EAAOrB,KAAOqB,EAAOzD,MAAQkG,EAAK/B,WAuKjDjB,EAAsBD,GAEtBpD,EAAOoD,EAAItD,EAAmB,aAO9BE,EAAOoD,EAAI1D,GAAgB,WACzB,OAAOqD,QAGT/C,EAAOoD,EAAI,YAAY,WACrB,MAAO,wBAkCTnE,EAAQqH,KAAO,SAASC,GACtB,IAAID,EAAO,GACX,IAAK,IAAIpG,KAAOqG,EACdD,EAAKtB,KAAK9E,GAMZ,OAJAoG,EAAKE,UAIE,SAASlC,IACd,KAAOgC,EAAKf,QAAQ,CAClB,IAAIrF,EAAMoG,EAAKG,MACf,GAAIvG,KAAOqG,EAGT,OAFAjC,EAAKnE,MAAQD,EACboE,EAAK/B,MAAO,EACL+B,EAQX,OADAA,EAAK/B,MAAO,EACL+B,IAsCXrF,EAAQkE,OAASA,EAMjBjC,EAAQ7B,UAAY,CAClBwG,YAAa3E,EAEbiE,MAAO,SAASuB,GAcd,GAbA3D,KAAK4D,KAAO,EACZ5D,KAAKuB,KAAO,EAGZvB,KAAKf,KAAOe,KAAKd,MAAQ/C,EACzB6D,KAAKR,MAAO,EACZQ,KAAKnB,SAAW,KAEhBmB,KAAKzB,OAAS,OACdyB,KAAKxB,IAAMrC,EAEX6D,KAAKgC,WAAWzB,QAAQ2B,IAEnByB,EACH,IAAK,IAAIZ,KAAQ/C,KAEQ,MAAnB+C,EAAKc,OAAO,IACZtH,EAAOqD,KAAKI,KAAM+C,KACjBR,OAAOQ,EAAKe,MAAM,MACrB9D,KAAK+C,GAAQ5G,IAMrB4H,KAAM,WACJ/D,KAAKR,MAAO,EAEZ,IACIwE,EADYhE,KAAKgC,WAAW,GACLG,WAC3B,GAAwB,UAApB6B,EAAWzE,KACb,MAAMyE,EAAWxF,IAGnB,OAAOwB,KAAKiE,MAGd9E,kBAAmB,SAAS+E,GAC1B,GAAIlE,KAAKR,KACP,MAAM0E,EAGR,IAAIhG,EAAU8B,KACd,SAASmE,EAAOC,EAAKC,GAYnB,OAXAhF,EAAOE,KAAO,QACdF,EAAOb,IAAM0F,EACbhG,EAAQqD,KAAO6C,EAEXC,IAGFnG,EAAQK,OAAS,OACjBL,EAAQM,IAAMrC,KAGNkI,EAGZ,IAAK,IAAI5B,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GACxBpD,EAASsC,EAAMQ,WAEnB,GAAqB,SAAjBR,EAAMC,OAIR,OAAOuC,EAAO,OAGhB,GAAIxC,EAAMC,QAAU5B,KAAK4D,KAAM,CAC7B,IAAIU,EAAW/H,EAAOqD,KAAK+B,EAAO,YAC9B4C,EAAahI,EAAOqD,KAAK+B,EAAO,cAEpC,GAAI2C,GAAYC,EAAY,CAC1B,GAAIvE,KAAK4D,KAAOjC,EAAME,SACpB,OAAOsC,EAAOxC,EAAME,UAAU,GACzB,GAAI7B,KAAK4D,KAAOjC,EAAMG,WAC3B,OAAOqC,EAAOxC,EAAMG,iBAGjB,GAAIwC,GACT,GAAItE,KAAK4D,KAAOjC,EAAME,SACpB,OAAOsC,EAAOxC,EAAME,UAAU,OAG3B,CAAA,IAAI0C,EAMT,MAAM,IAAI7F,MAAM,0CALhB,GAAIsB,KAAK4D,KAAOjC,EAAMG,WACpB,OAAOqC,EAAOxC,EAAMG,gBAU9B1C,OAAQ,SAASG,EAAMf,GACrB,IAAK,IAAIiE,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC5B,GAAId,EAAMC,QAAU5B,KAAK4D,MACrBrH,EAAOqD,KAAK+B,EAAO,eACnB3B,KAAK4D,KAAOjC,EAAMG,WAAY,CAChC,IAAI0C,EAAe7C,EACnB,OAIA6C,IACU,UAATjF,GACS,aAATA,IACDiF,EAAa5C,QAAUpD,GACvBA,GAAOgG,EAAa1C,aAGtB0C,EAAe,MAGjB,IAAInF,EAASmF,EAAeA,EAAarC,WAAa,GAItD,OAHA9C,EAAOE,KAAOA,EACdF,EAAOb,IAAMA,EAETgG,GACFxE,KAAKzB,OAAS,OACdyB,KAAKuB,KAAOiD,EAAa1C,WAClB9C,GAGFgB,KAAKyE,SAASpF,IAGvBoF,SAAU,SAASpF,EAAQ0C,GACzB,GAAoB,UAAhB1C,EAAOE,KACT,MAAMF,EAAOb,IAcf,MAXoB,UAAhBa,EAAOE,MACS,aAAhBF,EAAOE,KACTS,KAAKuB,KAAOlC,EAAOb,IACM,WAAhBa,EAAOE,MAChBS,KAAKiE,KAAOjE,KAAKxB,IAAMa,EAAOb,IAC9BwB,KAAKzB,OAAS,SACdyB,KAAKuB,KAAO,OACa,WAAhBlC,EAAOE,MAAqBwC,IACrC/B,KAAKuB,KAAOQ,GAGP/C,GAGT0F,OAAQ,SAAS5C,GACf,IAAK,IAAIW,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC5B,GAAId,EAAMG,aAAeA,EAGvB,OAFA9B,KAAKyE,SAAS9C,EAAMQ,WAAYR,EAAMI,UACtCG,EAAcP,GACP3C,IAKb2F,MAAS,SAAS/C,GAChB,IAAK,IAAIa,EAAIzC,KAAKgC,WAAWQ,OAAS,EAAGC,GAAK,IAAKA,EAAG,CACpD,IAAId,EAAQ3B,KAAKgC,WAAWS,GAC5B,GAAId,EAAMC,SAAWA,EAAQ,CAC3B,IAAIvC,EAASsC,EAAMQ,WACnB,GAAoB,UAAhB9C,EAAOE,KAAkB,CAC3B,IAAIqF,EAASvF,EAAOb,IACpB0D,EAAcP,GAEhB,OAAOiD,GAMX,MAAM,IAAIlG,MAAM,0BAGlBmG,cAAe,SAASxC,EAAUf,EAAYE,GAa5C,OAZAxB,KAAKnB,SAAW,CACdjC,SAAUwD,EAAOiC,GACjBf,WAAYA,EACZE,QAASA,GAGS,SAAhBxB,KAAKzB,SAGPyB,KAAKxB,IAAMrC,GAGN6C,IAQJ9C,GAOsB4I,EAAO5I,SAGtC,IACE6I,mBAAqB9I,EACrB,MAAO+I,GAWmB,iBAAfC,WACTA,WAAWF,mBAAqB9I,EAEhCiJ,SAAS,IAAK,yBAAdA,CAAwCjJ,wBC5tB/BkJ,EAAU,gBACrBC,IAAAA,MACAC,IAAAA,GACAC,IAAAA,YACAC,IAAAA,gBACAC,QAAAA,aAAUC,OAEW,IAAjBL,EAAM5C,OAAc,OACL4C,EAAM,UAIrBM,0BACEvI,IAAKkI,EACLA,GAAIA,EACJM,KAPIC,EAQJC,KAROC,EASPC,EARWT,EAAc,EASzBU,OAAQT,EACRU,KAAMV,QAKNW,EAAId,EAAMe,QACd,SAACC,EAAKC,EAAO5D,EAAG6D,UACR,IAAN7D,OAAe4D,EAAMT,MAAKS,EAAMP,EAASM,MAAOZ,EAAQa,EAAO5D,EAAG6D,KACpE,WAIAZ,wBACEvI,IAAKkI,EACLA,GAAIA,EACJa,EAAGA,EACHD,KAAK,OACLM,cAAc,QACdP,OAAQT,EACRD,YAAaA,KAsBbkB,EAAe,SAACC,OAjBDC,EAAeC,EAC5BC,EACAC,EAgBEC,EAAqCL,EAArCK,QAAyBrD,EAAYgD,EAAZhD,QAO3BsD,GAxBAH,GAD4BD,EAkBWF,EAA5BlF,MAGCuF,GApBKlB,GADJc,EAkB0BD,EAAtBO,UAEDF,GAnBYlB,EAC5BiB,EAAUF,EAAOb,EAAIY,EAAOZ,EAE3B,CACLtD,OAAQyE,KAAKC,KAAKD,SAAAL,EAAW,YAAIC,EAAW,IAC5CM,MAAOF,KAAKG,MAAMP,EAASD,KAqBvBO,EAAQJ,EAAEI,OAAS1D,EAAUwD,KAAKI,GAAK,GACvC7E,EALY,GAKHuE,EAAEvE,aAKV,CAHGsE,EAAQlB,EAAIqB,KAAKK,IAAIH,GAAS3E,EAC9BsE,EAAQhB,EAAImB,KAAKM,IAAIJ,GAAS3E,IAK7BiD,EAAgB,SAACY,EAAc5D,EAAW6D,OACjDkB,EAAO,KACPC,EAAO,YAEHhF,QACD,QACY+D,EAAa,CAC1BM,QAAST,IADVmB,OAAMC,kBAIJ,QACYjB,EAAa,CAC1BM,QAASR,EAAE7D,EAAI,GACflB,KAAM8E,IAFPmB,OAAMC,2BAMQjB,EAAa,CAC1BM,QAASR,EAAE7D,EAAI,GACfuE,SAAUV,EAAE7D,EAAI,GAChBlB,KAAM8E,IAHPmB,OAAMC,aAQUjB,EAAa,CAChCM,QAAST,EACTW,SAAUV,EAAE7D,EAAI,GAChBlB,KAAM+E,EAAE7D,EAAI,GACZgB,SAAS,eAGC+D,MAAQC,wBAAwBpB,EAAMT,OAAMS,EAAMP,GAQ1D4B,EAAQ,gBAAGrC,IAAAA,UACfK,gBAACA,EAAMiC,gBADYvC,MAEVwC,KAAI,SAACC,EAAkBC,UAC5BpC,gBAACP,GACChI,IAAQkI,OAAOyC,EACf1C,MAAOyC,EAAKzC,MACZC,GAAOA,OAAOyC,EACdxC,YAAauC,EAAKvC,YAClBC,YAAasC,EAAKtC,YAClBC,QAASC,SC/IXsC,EAAY,SAACC,UACjB,IAAI3E,SAAQ,SAAC1C,EAASC,OACdqH,EAAM,IAAIC,MAChBD,EAAIE,iBAAiB,QAAQ,WACvBF,EAAIG,MAAQ,GACdzH,EAAQsH,GAEVrH,EAAO,sBAETqH,EAAIE,iBAAiB,SAAS,SAAC1K,UAAQmD,EAAOnD,MAC9CwK,EAAII,IAAML,EACVC,EAAIK,aAAa,cAAe,iBAGpC,SAASC,EAAqBC,SACtBC,WAAYD,EAAOE,mBAAPC,EAAmBC,WAAU,GAEzCR,EAAQI,EAAOK,YACfC,EAASN,EAAOO,oBAEtBN,EAAUH,aAAa,iBAAkBF,MAASU,GAElDL,EAAUH,aAAa,QAASF,EAAMY,YACtCP,EAAUH,aAAa,SAAUQ,EAAOE,YACjC,CAAEP,UAAAA,EAAWL,MAAAA,EAAOU,OAAAA,OA2BhBG,EAASvD,EAAMwD,YAAmC,SAACC,EAAOC,OAEnEhE,EAmBE+D,EAnBF/D,MACAiE,EAkBEF,EAlBFE,UACAC,EAiBEH,EAjBFG,cACAC,EAgBEJ,EAhBFI,cACAC,EAeEL,EAfFK,cAeEL,EAdF9D,GAAAA,aAAK,0BAcH8D,EAbFf,MAAAA,aAAQ,WAaNe,EAZFL,OAAAA,aAAS,WAYPK,EAXFM,UAAAA,aAAY,0BAWVN,EAVFO,YAAAA,aAAc,UAUZP,EATFQ,gBAAAA,aAAkB,OAShBR,EARFS,0BAAAA,kBAQET,EAPFU,mCAAAA,aAAqC,WAOnCV,EANFW,qBAAAA,aAAuB,UAMrBX,EALFY,MAAAA,aAAQ,CACNC,OAAQ,0BACRC,aAAc,eAGdd,EADFe,SAAAA,aAAW,KAGPC,EAAYzE,EAAM0E,OAAuB,MAGzCC,EAAiB,SACrBC,aAEMC,WAAeJ,EAAUrD,gBAAV0D,EAAmBC,wBAElCC,WAAaC,OAAOC,WAAW,EAC/BC,WAAYF,OAAOG,WAAW,SAE/BP,EAIgB,CACnB3E,EAAG0E,EAAaS,MAAQR,EAAaS,KAAON,EAC5C5E,EAAGwE,EAAaW,MAAQV,EAAaW,IAAML,GALpC,CAAEjF,EAAG,EAAGE,EAAG,IAkDhBqF,EAAkB,SACtBC,GAE0B,UAAtBA,EAAMC,aAA4C,IAAjBD,EAAME,QAIhB,QAAzBxB,GACAsB,EAAMC,cAAgBvB,GAKxBN,KAKF9D,EAAM6F,oBAAoBnC,GAAK,iBAAO,CACpCoC,YAAa,SAACC,UACL,IAAIpI,sCAAgB,WAAO1C,EAASC,8FAEjC4H,EAAS2B,EAAUrD,8BAGjBpI,MAAM,2CAGuB6J,EAAqBC,GAAvCJ,IAAAA,MAAOU,IAAAA,OACpB4C,+BAA4CC,OAD1ClD,UAEImD,oBAGqB7D,EAAU2D,yBAArCG,UAEFjC,8CAEkB7B,EAAU4B,WAC5BkC,EAAkB5J,gEAElB6J,QAAQC,KACN,+GAKN1I,QAAQ2I,IAAIH,GACT9K,MAAK,SAACkL,OACCC,EAAeC,SAASC,cAAc,UAC5CF,EAAa5D,aAAa,QAASF,EAAMY,YACzCkD,EAAa5D,aAAa,SAAUQ,EAAOE,gBACrC9K,EAAUgO,EAAaG,WAAW,UAEnCnO,QACGQ,MAAM,2BAGduN,EAAOxI,UAAUlD,SAAQ,SAAC+L,GACxBpO,EAAQqO,UAAUD,EAAO,EAAG,MAG9B3L,EAAQuL,EAAaM,mBAAmBf,cAEnC,SAACgB,SACAA,uDAGV7L,kTAIN8L,UAAW,kBACF,IAAIrJ,SAAgB,SAAC1C,EAASC,aAE3B4H,WAAS2B,EAAUrD,WAAW,QAErB,OAAX0B,EAAiB,SACXC,EAAcF,EAAqBC,GAAnCC,aAEJmB,cACFjJ,EAAQ8H,EAAUmD,oBAIpBnD,EAAUkE,kBAAkBtH,sBAAmBuH,kBAC/CnE,EACGkE,kBAAkBtH,6BACjBiD,aAAa,OAAQoB,GAEzB/I,EAAQ8H,EAAUmD,WAGpBhL,EAAO,IAAIlC,MAAM,sBACjB,MAAO+N,GACP7L,EAAO6L,YAQf/G,EAAMmH,WAAU,kBACdV,SAAShE,iBAAiB,YAAagD,GAChC,WACLgB,SAASW,oBAAoB,YAAa3B,MAE3C,CAACA,QAEE4B,EAAc3H,EAAM4H,QAAO,SAACnF,UAAUA,EAAKoF,YAE7CC,EAAe,EACbC,EAAa/H,EAAMe,QACvB,SAACiH,EAAYvF,UACNA,EAAKoF,eAKuB9Q,IAA7BiR,EAAWF,KACbE,EAAWF,GAAgB,IAG7BE,EAAWF,GAAcjL,KAAK4F,GACvBuF,IATLF,GAAgB,EACTE,KAUX,CAAC,YAID1H,uBACE2H,KAAK,eACLjE,IAAKe,EACLV,UAAWA,EACXM,SACEuD,YAAa,OACblF,MAAAA,EACAU,OAAAA,GACGiB,kBAEQ,OACbT,cAlLsB,SACxB8B,QAK2B,QAAzBtB,GACAsB,EAAMC,cAAgBvB,GAKE,UAAtBsB,EAAMC,aAA4C,IAAjBD,EAAME,aAErCjF,EAAQgE,EAAee,GAE7B9B,EAAcjD,KAmKZkD,cAhKsB,SACxB6B,MAEK/B,IAIsB,QAAzBS,GACAsB,EAAMC,cAAgBvB,QAKlBzD,EAAQgE,EAAee,GAE7B7B,EAAclD,KAkJZmD,YAAa2B,GAEbzF,uBACE6H,QAAQ,MACRC,YAAY,OACZC,MAAM,6BACNC,WAAW,+BACX3D,SACE3B,MAAO,OACPU,OAAQ,QACLoB,GAEL7E,GAAIA,GAEJK,qBAAGL,GAAOA,0BAA2BsI,QAAQ,QAC3CjI,wBACEL,GAAOA,sBACPO,EAAE,IACFE,EAAE,IACFsC,MAAM,OACNU,OAAO,OACP7C,KAAK,UAEN8G,EAAYnF,KAAI,SAACgG,EAAYnL,UAC5BiD,gBAACP,GACChI,IAAQkI,cAAc5C,EACtB4C,GAAOA,cAAc5C,EACrB2C,MAAOwI,EAAWxI,MAClBG,YAAY,UACZD,YAAasI,EAAWtI,kBAI9BI,4BACGiE,GACCjE,2BACEL,GAAOA,iBACPO,EAAE,IACFE,EAAE,IACFsC,MAAM,OACNU,OAAO,OACP+E,aAAa,kBAEbnI,yBACEE,EAAE,IACFE,EAAE,IACFsC,MAAM,OACNU,OAAO,OACPgF,UAAWnE,EACXoE,oBAAqBlE,KAK1BkD,EAAYnF,KAAI,SAACoG,EAAGvL,UACnBiD,wBACEL,GAAOA,mBAAmB5C,EAC1BtF,IAAQkI,mBAAmB5C,EAC3BwL,UAAU,kBAEVvI,uBAAKwI,SAAU7I,wBACd8I,MAAMC,KACL,CAAE5L,OAAQuK,EAAYvK,OAASC,IAC/B,SAACuL,EAAGK,UAAMA,EAAI5L,KACdmF,KAAI,SAAC0G,UACL5I,uBACEvI,IAAKmR,EAAEtF,WACPkF,SAAU7I,cAAciJ,EAAEtF,qBAMpCtD,qBAAGL,GAAOA,+BACRK,wBACEL,GAAOA,wBACPO,EAAE,IACFE,EAAE,IACFsC,MAAM,OACNU,OAAO,OACP7C,KAAM0D,UAA0BtE,kBAAoBqE,KAGvDyD,EAAWvF,KAAI,SAAC2G,EAAW9L,UAC1BiD,qBACEL,GAAOA,oBAAoB5C,EAC3BtF,IAAQkI,oBAAoB5C,EAC5B+L,aAAcnJ,mBAAmB5C,OAEjCiD,gBAACgC,GAAMrC,GAAIA,EAAID,MAAOmJ,aC5UrBE,EAAoB/I,EAAMwD,YAGrC,SAACC,EAAOC,SAsBJD,EApBF9D,GAAAA,aAAK,0BAoBH8D,EAnBFf,MAAAA,aAAQ,WAmBNe,EAlBFL,OAAAA,aAAS,WAkBPK,EAjBFM,UAAAA,aAAY,OAiBVN,EAhBFO,YAAAA,aAAc,YAgBZP,EAfF5D,YAAAA,aAAc,UAeZ4D,EAdFQ,gBAAAA,aAAkB,OAchBR,EAbFS,0BAAAA,kBAaET,EAZFU,mCAAAA,aAAqC,WAYnCV,EAXF7D,YAAAA,aAAc,MAWZ6D,EAVFuF,YAAAA,aAAc,MAUZvF,EATFW,qBAAAA,aAAuB,UASrBX,EARFY,MAAAA,aAAQ,CACNC,OAAQ,0BACRC,aAAc,eAMdd,EAJFe,SAAAA,aAAW,OAITf,EAHFwF,SAAAA,aAAW,SAACC,SAGVzF,EAFF0F,SAAAA,aAAW,SAACC,EAAmBC,SAE7B5F,EADF6F,cAAAA,gBAGIvG,EAAY/C,EAAMuJ,cACQvJ,EAAMwJ,UAAkB,GAAjDjC,OAAUkC,SACiBzJ,EAAMwJ,UAAkB,GAAnD7F,OAAW+F,SACkB1J,EAAMwJ,SAAuB,IAA1DG,OAAYC,SACe5J,EAAMwJ,SAAuB,IAAxDK,OAAWC,SACsB9J,EAAMwJ,SAAuB,IAA9DO,OAAcC,QAEfC,GAAejK,EAAMkK,aAAY,mBAC/BC,oBAAaJ,EAAa3L,OAAO,WAApBgM,EAAyB,MAAM,KAE/B,OAAfD,EAKJhB,EAASgB,GAAaA,EAAW5C,UAJ/BnB,QAAQC,KAAK,sBAKd,CAAC1C,WAEJ3D,EAAMmH,WAAU,WACd8C,OACC,CAACtG,IAEJ3D,EAAMmH,WAAU,WACd8B,EAASc,KACR,CAACA,IAEJ/J,EAAM6F,oBAAoBnC,GAAK,iBAAO,CACpC2G,UAAW,SAACC,GACVb,GAAaa,IAEfC,YAAa,WACXX,YAAkBG,IAClBC,GAAgB,KAElBQ,KAAM,cAEsB,IAAtBb,EAAW7M,cACbkN,aAAoBL,SACpBC,EAAc,IAKhBE,GAAa,SAACD,mBAAkBA,EAAcE,EAAa3L,OAAO,OAClE4L,IAAgB,SAACD,UAAiBA,EAAa3L,MAAM,GAAI,OAE3DqM,KAAM,WAEqB,IAArBZ,EAAU/M,SAEdkN,IAAgB,SAACD,mBACZA,EACAF,EAAUzL,OAAO,OAEtB0L,GAAa,SAACD,UAAcA,EAAUzL,MAAM,GAAI,QAElD0H,YAAa,SAACC,SACND,WAAc/C,EAAU3B,gBAAVsJ,EAAmB5E,eAElCA,SAGIA,EAAYC,SAFb/M,MAAM,gDAKhBgO,UAAW,kBACF,IAAIrJ,SAAgB,SAAC1C,EAASC,SAC7B8L,WAAYjE,EAAU3B,gBAAVuJ,EAAmB3D,UAEhCA,EAGHA,IACG3L,MAAK,SAACuP,GACL3P,EAAQ2P,aAEH,SAAC7D,GACN7L,EAAO6L,MAPX7L,EAAOlC,MAAM,oDAYnB6R,YAAa,kBACJ,IAAIlN,SAAsB,SAAC1C,EAASC,OAEvCD,EAAQ8O,GACR,MAAOhD,GACP7L,EAAO6L,QAIb+D,UAAW,SAACpL,GACVsK,IAAgB,SAACD,mBAAqBA,EAAiBrK,OAEzDqL,iBAAkB,kBACT,IAAIpN,SAAgB,SAAC1C,EAASC,GAC9BoO,GACHpO,EAAO,IAAIlC,MAAM,uDAcjBiC,EAVsB8O,EAAatJ,QACjC,SAACuK,EAAoB7I,WACb8I,WAAiB9I,EAAK8I,kBAAkB,SAGvCD,aAFc7I,EAAK+I,gBAAgB,GAEED,KAE9C,IAIF,MAAOlE,GACP7L,EAAO6L,QAIboE,YAAa,WACXvB,EAAc,IACdE,EAAa,IACbE,GAAgB,SAqElBhK,gBAACuD,GACCG,IAAKX,EACLpD,GAAIA,EACJ+C,MAAOA,EACPU,OAAQA,EACRW,UAAWA,EACXC,YAAaA,EACbC,gBAAiBA,EACjBC,0BAA2BA,EAC3BC,mCAAoCA,EACpCC,qBAAsBA,EACtBC,MAAOA,EACPG,SAAUA,EACV9E,MAAOqK,EACPpG,UAAWA,EACXC,cAhFsB,SAACjD,GACzB+I,GAAa,GACbI,EAAa,QAETxJ,EAAqB,CACvBiH,SAAUA,EACV1H,YAAa0H,EAAW1H,EAAc,UACtCD,YAAa2H,EAAW3H,EAAcoJ,EACtCtJ,MAAO,CAACiB,IAGN2I,IACFhJ,OACKA,GACH2K,eAAgBG,KAAKC,MACrBH,aAAc,KAIlBlB,IAAgB,SAACD,mBAAqBA,GAAczJ,QA8DlDuD,cA3DsB,SAAClD,MACpBgD,OAEC2H,EAAgBvB,EAAa3L,OAAO,GAAG,GACvCmN,OACDD,GACH5L,gBAAW4L,EAAc5L,OAAOiB,MAElCqJ,IAAgB,SAACD,mBACZA,EAAa3L,MAAM,GAAI,IAC1BmN,SAkDAzH,YA9CoB,sBACjBH,IAIL+F,GAAa,GAERJ,QAIDgC,oBAAgBvB,EAAa3L,OAAO,WAApBoN,EAAyB,MAAM,QAE7B,OAAlBF,OAIEC,OACDD,GACHJ,aAAcE,KAAKC,QAGrBrB,IAAgB,SAACD,mBACZA,EAAa3L,MAAM,GAAI,IAC1BmN"}